# Diplom

How to run:
Docker
```shell
docker build -t {lab1/lab2/lab3/lab4/lab5} .
docker run --name {lab1/lab2/lab3/lab4/lab5} -v full_file.xlsx:/app {lab1/lab2/lab3/lab4/lab5}
docker cp {lab1/lab2/lab3/lab4/lab5}:/app/full_file.xlsx .
```
Python
```shell
python main.py
```

# Description of tasks
## Module 1
<details>

* Необходимо из создать простейший конвейер для автоматизации работы с моделью машинного обучения.
* Отдельные этапы конвейера машинного обучения описываются в разных python–скриптах, которые потом соединяются в единую цепочку действий с помощью bash-скрипта.
* Все файлы необходимо разместить в подкаталоге lab1 корневого каталога

Этапы:
1. Создайте python-скрипт (data_creation.py), который создает различные наборы данных, описывающие некий процесс (например, изменение дневной температуры). Таких наборов должно быть несколько, в некоторые данные можно включить аномалии или шумы. 
Часть наборов данных должны быть сохранены в папке “train”, другая часть в папке “test”. Одним из вариантов выполнения этого этапа может быть скачивание набора данных из сети, и разделение выборки на тестовую и обучающую. Учтите, что файл должен быть доступен и методы скачивания либо есть в ubuntu либо устанавливаются через pip в файле pipeline.sh
2. Создайте python-скрипт (data_preprocessing.py), который выполняет предобработку данных, например, с помощью sklearn.preprocessing.StandardScaler. Трансформации выполняются и над тестовой и над обучающей выборкой. 
3. Создайте python-скрипт (model_preparation.py), который создает и обучает модель машинного обучения (model.*) на построенных данных из папки “train”. Для сохранения модели в файл можно воспользоваться [pickle](https://docs.python.org/3/library/pickle.html) (см. [пример](https://rukovodstvo.net/posts/id_1322/))
4. Создайте python-скрипт (model_testing.py), проверяющий модель машинного обучения на построенных данных из папки “test”.
5. Напишите bash-скрипт (pipeline.sh), последовательно запускающий все python-скрипты. При необходимости усложните скрипт. В результате выполнения скрипта на терминал в стандартный поток вывода печатается одна строка с оценкой метрики на вашей модели:
```shell
Model test accuracy is: 0.876
```
6. Создайте файл с зависимостями requirements.txt

Настоятельно рекомендуем вам проверить работоспособность скрипта в окружении отличном от того в котором происходила разработка.
</details>

## Module 2
<details>

•	Вам нужно разработать собственный конвейер автоматизации для проекта машинного обучения. Для этого вам понадобится виртуальная машина с установленным Jenkins, python и необходимыми библиотеками. В ходе выполнения практического задания вам необходимо автоматизировать сбор данных, подготовку датасета, обучение модели и работу модели.
•	Разработанный конвеер требуется выгрузить в файл. Так же все скрипты (этапы конвеера требуется сохранить)
•	Все файлы необходимо разместить в подкаталоге lab2 корневого каталога

Этапы:
1.	Развернуть сервер с Jenkins, установить необходимое программное обеспечение для работы над созданием модели машинного обучения.
2.	Создайте python-скрипт (data_creation.py), который создает различные наборы данных, описывающие некий процесс (например, изменение дневной температуры). Таких наборов должно быть несколько, в некоторые данные можно включить аномалии или шумы. Часть наборов данных должны быть сохранены в папке “train”, другая часть в папке “test”. Одним из вариантов выполнения этого этапа может быть скачивание набора данных из сети, и разделение выборки на тестовую и обучающую. Учтите, что файл должен быть доступен.
3.	Создайте python-скрипт (data_preprocessing.py), который выполняет предобработку данных, например, с помощью sklearn.preprocessing.StandardScaler. Трансформации выполняются и над тестовой и над обучающей выборкой.
4.	Создайте python-скрипт (model_preparation.py), который создает и обучает модель машинного обучения (model.*) на построенных данных из папки “train”. Для сохранения модели в файл можно воспользоваться pickle (см. пример [3])
5.	Создайте python-скрипт (model_testing.py), проверяющий модель машинного обучения на построенных данных из папки “test”.
6.	Реализовать задания и конвеер, последовательно запускающий все python-скрипты (Jenkinsfile-файл). Связать конвеер с системой контроля версий. Сохранить конвеер. В результате выполнения скрипта. В результате выполнения скрипта на терминал в стандартный поток вывода печатается одна строка с оценкой метрики на вашей модели:
```shell
Model test accuracy is: 0.876
```
7.	Создайте файл с зависимостями requirements.txt.
Настоятельно рекомендуем вам проверить работоспособность скрипта в окружении отличном от того в котором происходила разработка.

</details>

## Module 3
<details>

Задача:
В практическом задание по модулю вам необходимо применить полученные знания по работе с docker (и docker-compose). Вам необходимо использовать полученные ранее знания по созданию микросервисов. В этом задании необходимо развернуть микросервис в контейнере докер. Например, это может быть модель машинного обучения, принимающая запрос по API и возвращающая ответ. В результате выполнения скрипта на терминал в стандартный поток вывода печатается одна строка с оценкой метрики на вашей модели:
```shell
Model test accuracy is: 0.876
```
Вариантом может быть реализация приложения на основе streamlit (https://github.com/korelin/streamlit_demo_app). Результаты работы над этой работой стоит поместить в подкаталог lab3 вашего корневого каталога репозитория.

Этапы разработки:
•	Подготовить Python-код для модели и микросервиса;
•	Создать Dockerfile;
•	Создать docker-образ;
•	Запустить docker контейнер и проверить его работу;
•	Создать docker_pipeline.sh-файл, который будет автоматически создавать docker-образ и запускать docker-контейнер;
•	Создать файл requirements.txt.

Дополнительными плюсами будут:
1.	Использование docker-compose
2.	Деплой (загрузка) образа в хранилище артефактов dockerhub

</details>
